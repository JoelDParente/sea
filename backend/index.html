<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Teste PDF DOMPDF</title>
</head>
<body>

<h2>Gerar e visualizar PDF</h2>
<button onclick="gerarPDF()">Gerar PDF</button>

<script>
async function gerarPDF() {
    const resp = await fetch("http://localhost/sea/backend/gerar_pdf.php", {
        method: "POST"
    });

    const data = await resp.json();
    if (!data.url) {
        alert("Erro ao gerar PDF");
        return;
    }

    // Abre o PDF em outra aba SEM CACHE
    const urlSemCache = data.url + "?t=" + Date.now();

    window.open(urlSemCache, "_blank");
}
</script>

</body>
</html>